% !TeX spellcheck = en_GB
% !TeX program = xelatex
\documentclass{report}

% we have to load xcolor first, see http://tex.stackexchange.com/questions/99049/latex-error-option-clash-for-package-xcolor-even-if-i-put-listings-before
\usepackage[dvipsnames]{xcolor}

\input{../visualization/inputs/relalg-packages}
\input{../visualization/inputs/relalg-commands}

%\usepackage[a4paper,top=2cm,bottom=2cm,left=2cm,right=2cm]{geometry}
\usepackage[a4paper,margin=2.5cm]{geometry}
\usepackage{hyperref}

\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{csquotes}
\usepackage{microtype}
\usepackage[math]{blindtext}
\usepackage{url}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{array}
\usepackage{rotate}
\usepackage{enumitem}
\usepackage{todonotes}
\usepackage{adjustbox}
\usepackage{autobreak}
\usepackage{xstring}
\usepackage{progressbar}
\usepackage{lineno}
\usepackage{accsupp}
\usepackage{datetime}
%\usepackage{tocstyle} % prevents numbers an titles from overlapping in ToC

\renewcommand{\thelinenumber}{
	\BeginAccSupp{ActualText={}}\arabic{linenumber}\EndAccSupp{}%
}

\pagestyle{fancy}
\fancyhf{}

\renewcommand{\subsectionmark}[1]{\def\subsectiontitle{: #1}}
\fancyhead[L]{\nouppercase{\rightmark}} % \StrLeft{\subsectiontitle}{50}}}
\fancyhead[R]{\thepage}

\input{commands}
\input{listings}

\nonfrenchspacing

% title page
\title{openCypher Specification}
\author{G\'abor Sz\'arnyas, J\'ozsef Marton}

\begin{document}

\begin{titlepage}
	\begin{center}
		\includegraphics[width=60mm,keepaspectratio]{figures/bme-logo}\\
		\vspace{0.3cm}
		\textbf{Budapest University of Technology and Economics}\\
		\textmd{Faculty of Electrical Engineering and Informatics}\\[5cm]
		
		\vspace{0.4cm}
		{\huge \bfseries Formalization of openCypher queries in relational algebra}\\[0.8cm]
		\vspace{0.5cm}
		\textsc{\Large Technical Report}\\[4cm]
		
		{\Large Gábor Szárnyas, József Marton}\\

		\IfFileExists{./disable-appendix}{}{
			\vspace{2cm}
			\begin{tabular}{llr@{ of }l}
			\input{appendix/progressbar-tck}
			\input{appendix/progressbar-fraud-detection}
			\input{appendix/progressbar-ldbc-snb-interactive}
			\input{appendix/progressbar-ldbc-snb-bi}
			\input{appendix/progressbar-movie-database}
			\input{appendix/progressbar-static-analysis-java}
			\input{appendix/progressbar-static-analysis-javascript}
			\input{appendix/progressbar-trainbenchmark}
			\end{tabular}
		}
		
		\vfill
		{\large Generated on \yyyymmdddate \today~\currenttime~GMT+0.}
	\end{center}		
\end{titlepage}

\tableofcontents

\input{executive-summary}

\input{foundations}

\input{incremental}

\bibliographystyle{abbrv}
\bibliography{bib}

\IfFileExists{./disable-appendix}{}{
	\appendix
	\input{appendix/chapter-tck}
	\input{appendix/chapter-fraud-detection}
	\input{appendix/chapter-ldbc-snb-interactive}
	\input{appendix/chapter-ldbc-snb-bi}
	\input{appendix/chapter-movie-database}
	\input{appendix/chapter-static-analysis-java}
	\input{appendix/chapter-static-analysis-javascript}
	\input{appendix/chapter-trainbenchmark}
}

\end{document}
