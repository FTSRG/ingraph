%if lstlistings is used
%better approach: use the minted package - see https://en.wikibooks.org/wiki/LaTeX/Source_Code_Listings#The_minted_package
%SzG: updating minted is quite cumbersome, see http://tex.stackexchange.com/questions/18083/how-to-add-custom-c-keywords-to-be-recognized-by-minted
\usepackage{listings}

\definecolor{lightgray}{RGB}{242,242,242}
\definecolor{keywordcolor}{RGB}{0,0,160}
\definecolor{commentcolor}{RGB}{0,128,64}
\definecolor{stringcolor}{RGB}{0,128,0}
\definecolor{functioncolor}{RGB}{171,0,85}


\lstdefinelanguage{cypher}
{
	morekeywords={
		MATCH, OPTIONAL, WHERE, IS, NOT, AND, OR, XOR, RETURN, DISTINCT, ORDER, BY, ASC, ASCENDING, DESC, DESCENDING, UNWIND, AS, UNION, WITH, ALL, CREATE, DELETE, DETACH, REMOVE, SET, MERGE, SET, SKIP, LIMIT,
		% string operators
		STARTS, ENDS, CONTAINS,
		% set operator
		IN,
		% some legacy rules
		INDEX, DROP, UNIQUE, CONSTRAINT, EXPLAIN, PROFILE, START, CASE,
		% some SQL-only keywords (for texts referencing SQL constructs)
		GROUP, HAVING
	},
	sensitive=true,
	morecomment=[l]{//},
	morecomment=[s]{/*}{*/},
	morestring=[b]{"},
	literate=*
		{avg(}{\textcolor{functioncolor}{avg}(}{1}%
		{count(}{\textcolor{functioncolor}{count}(}{1}%
		{max(}{\textcolor{functioncolor}{max}(}{1}%
		{min(}{\textcolor{functioncolor}{min}(}{1}%
		{sum(}{\textcolor{functioncolor}{sum}(}{1}%
		{stdev(}{\textcolor{functioncolor}{stdev}(}{1}%
		{stdevp(}{\textcolor{functioncolor}{stdevp}(}{1}%
		{stddev(}{\textcolor{functioncolor}{stddev}(}{1}%
		{stddevp(}{\textcolor{functioncolor}{stddevp}(}{1}%
		{percentileCont(}{\textcolor{functioncolor}{percentileCont}(}{1}%
		{percentileDisc(}{\textcolor{functioncolor}{percentileDisc}(}{1}%
		{toBoolean(}{\textcolor{functioncolor}{toBoolean}(}{1}%
		{toInteger(}{\textcolor{functioncolor}{toInteger}(}{1}%
		{toInt(}{\textcolor{functioncolor}{toInt}(}{1}%
		{toFloat(}{\textcolor{functioncolor}{toFloat}(}{1}%
		{toString(}{\textcolor{functioncolor}{toString}(}{1}%
		{relationships(}{\textcolor{functioncolor}{relationships}(}{1}%
		{tail(}{\textcolor{functioncolor}{tail}(}{1}%
		{keys(}{\textcolor{functioncolor}{keys}(}{1}%
		{labels(}{\textcolor{functioncolor}{labels}(}{1}%
		{nodes(}{\textcolor{functioncolor}{nodes}(}{1}%
		{range(}{\textcolor{functioncolor}{range}(}{1}%
		{e(}{\textcolor{functioncolor}{e}(}{1}%
		{log(}{\textcolor{functioncolor}{log}(}{1}%
		{log10(}{\textcolor{functioncolor}{log10}(}{1}%
		{sqrt(}{\textcolor{functioncolor}{sqrt}(}{1}%
		{abs(}{\textcolor{functioncolor}{abs}(}{1}%
		{ceil(}{\textcolor{functioncolor}{ceil}(}{1}%
		{floor(}{\textcolor{functioncolor}{floor}(}{1}%
		{round(}{\textcolor{functioncolor}{round}(}{1}%
		{sign(}{\textcolor{functioncolor}{sign}(}{1}%
		{rand(}{\textcolor{functioncolor}{rand}(}{1}%
		{exists(}{\textcolor{functioncolor}{exists}(}{1}%
		{coalesce(}{\textcolor{functioncolor}{coalesce}(}{1}%
		{startNode(}{\textcolor{functioncolor}{startNode}(}{1}%
		{endNode(}{\textcolor{functioncolor}{endNode}(}{1}%
		{head(}{\textcolor{functioncolor}{head}(}{1}%
		{last(}{\textcolor{functioncolor}{last}(}{1}%
		{length(}{\textcolor{functioncolor}{length}(}{1}%
		{properties(}{\textcolor{functioncolor}{properties}(}{1}%
		{size(}{\textcolor{functioncolor}{size}(}{1}%
		{type(}{\textcolor{functioncolor}{type}(}{1}%
		{id(}{\textcolor{functioncolor}{id}(}{1}%
		{left(}{\textcolor{functioncolor}{left}(}{1}%
		{right(}{\textcolor{functioncolor}{right}(}{1}%
		{ltrim(}{\textcolor{functioncolor}{ltrim}(}{1}%
		{rtrim(}{\textcolor{functioncolor}{rtrim}(}{1}%
		{trim(}{\textcolor{functioncolor}{trim}(}{1}%
		{replace(}{\textcolor{functioncolor}{replace}(}{1}%
		{reverse(}{\textcolor{functioncolor}{reverse}(}{1}%
		{substring(}{\textcolor{functioncolor}{substring}(}{1}%
		{lower(}{\textcolor{functioncolor}{lower}(}{1}%
		{upper(}{\textcolor{functioncolor}{upper}(}{1}%
		{split(}{\textcolor{functioncolor}{split}(}{1}%
		{acos(}{\textcolor{functioncolor}{acos}(}{1}%
		{asin(}{\textcolor{functioncolor}{asin}(}{1}%
		{atan(}{\textcolor{functioncolor}{atan}(}{1}%
		{atan2(}{\textcolor{functioncolor}{atan2}(}{1}%
		{cos(}{\textcolor{functioncolor}{cos}(}{1}%
		{cot(}{\textcolor{functioncolor}{cot}(}{1}%
		{sin(}{\textcolor{functioncolor}{sin}(}{1}%
		{tan(}{\textcolor{functioncolor}{tan}(}{1}%
		{degrees(}{\textcolor{functioncolor}{degrees}(}{1}%
		{radians(}{\textcolor{functioncolor}{radians}(}{1}%
		{pi(}{\textcolor{functioncolor}{pi}(}{1}%
}

\lstset{
	numbers=left,
	numberstyle=\scriptsize\ttfamily,
	stepnumber=1,
	numbersep=5pt,
	%
	backgroundcolor=\color{lightgray},
	basicstyle=\small\ttfamily,
	keywordstyle=\color{keywordcolor}\bfseries\ttfamily,
	commentstyle=\color{commentcolor}\ttfamily,
	stringstyle=\color{stringcolor}\ttfamily,
	identifierstyle=, % nothing happens
	%
	showstringspaces=false, % no special string spaces
	aboveskip=3pt,
	belowskip=3pt,
	columns=flexible,
	keepspaces=true,
	breaklines=true,
	frameround=tttt,
	captionpos=b,
	tabsize=2,
	frame=tb,
	framerule=0pt,
	framexleftmargin=0.25em,
	tabsize=4,
	language=Cypher,
}

\newcommand{\listingcypher}[2]{
	\lstset{
		language=Cypher
	}
	\lstinputlisting[label=lst:#1, caption=#2.]{queries/#1.cyp}
}

%\lstset{language=Cypher,
%	literate=*
%
%	{<v>}{\guilsinglleft{}}{1}
%	{</v>}{\guilsinglright{}}{1},
%5}
