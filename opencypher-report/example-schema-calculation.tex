\begin{forest} for tree={align=center}
[
	{$\production{\var{n.name}}$
	\\ \footnotesize
	$\color{gray} \langle \var{n.name} \rangle $
	\\ \footnotesize
	$\color{violet} \langle  \rangle $
	\\ \footnotesize
	$\color{orange} \langle {}_{0}^{0}
	\var{n.name}
	 \rangle$
	}
		[
			{$\projection{\var{n.name}
				}{}
			$
			\\ \footnotesize
			$\color{gray} \langle \var{n.name} \rangle $
			\\ \footnotesize
			$\color{violet} \langle  \rangle $
			\\ \footnotesize
			$\color{orange} \langle {}_{0}^{1}
			\var{n.name}
			 \rangle$
			}
				[
					{$\selection{
						\var{n.age} > \literal{27}
					}
					$
					\\ \footnotesize
					$\color{gray} \langle \var{n} \rangle $
					\\ \footnotesize
					$\color{violet} \langle \var{n.name} \rangle $
					\\ \footnotesize
					$\color{orange} \langle {}_{0}^{}
					\var{n}
					, {}_{1}^{}
					\var{n.name}
					, {}_{2}^{}
					\var{n.age}
					 \rangle$
					}
						[
							{$\alldifferent{}$
							\\ \footnotesize
							$\color{gray} \langle \var{n} \rangle $
							\\ \footnotesize
							$\color{violet} \langle \var{n.name}, \var{n.age} \rangle $
							\\ \footnotesize
							$\color{orange} \langle {}_{0}^{}
							\var{n}
							, {}_{1}^{}
							\var{n.name}
							, {}_{2}^{}
							\var{n.age}
							 \rangle$
							}
								[
									{$\getvertices{n}{Person}$
									\\ \footnotesize
									$\color{gray} \langle \var{n} \rangle $
									\\ \footnotesize
									$\color{violet} \langle \var{n.name}, \var{n.age} \rangle $
									\\ \footnotesize
									$\color{orange} \langle {}_{0}^{}
									\var{n}
									, {}_{1}^{}
									\var{n.name}
									, {}_{2}^{}
									\var{n.age}
									 \rangle$
									},tier=input,for tree={blue,densely dashed}
								]
						]
				]
		]
]
;
\end{forest}
