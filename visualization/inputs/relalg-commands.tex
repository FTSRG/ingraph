\newcommand{\relnull}{\mathsf{NULL}}

\newcommand{\assign}{\rightarrow}

\newcommand{\lxor}{\oplus}

\newcommand{\asc}{\uparrow}
\newcommand{\desc}{\downarrow}

\newcommand{\tuple}[1]{\langle #1 \rangle}
\newcommand{\concatenation}{\Vert}

\newcommand{\literal}[1]{\mathsf{#1}}
\newcommand{\atom}[1]{\mathsf{#1}}

\newcommand{\var}[1]{\mathtt{#1}}
\newcommand{\edgevariable}[2]{\var{#1}
	\ifstrempty{#2}{}{\colon{\atom{#2}}}}
\newcommand{\nodevariable}[2]{(\var{#1}
	\ifstrempty{#2}{}{\colon{\atom{#2}}})}

% see http://tug.ctan.org/info/symbols/comprehensive/symbols-a4.pdf

%%%%%%%%%%%%%%%%%%%%% operator symbols %%%%%%%%%%%%%%%%%%%%%

% based on http://tex.stackexchange.com/questions/20740/symbols-for-outer-joins
\def\ojoin{\setbox0=\hbox{$\bowtie$}\rule[-.02ex]{.25em}{.4pt}\llap{\rule[\ht0]{.25em}{.4pt}}}

\newcommand{\leftouterjoinsymbol}{\mathbin{\ojoin\mkern-5.8mu\bowtie}}
\newcommand{\antijoinsymbol}{\, \triangleright \,}

%%%%%%%%%%%%%%%%%%%%% operator names %%%%%%%%%%%%%%%%%%%%%

\newcommand{\relalgop}[1]{\textsc{#1}}

\newcommand{\getverticesop}{\iftoggle{textualoperators}{
		\relalgop{GetVertices}
	}{
		\bigcirc
	}}

\newcommand{\getedgesopdirected}{\iftoggle{textualoperators}{
		\relalgop{GetEdges}
	}{
		\Uparrow
	}}

\newcommand{\getedgesopundirected}{\iftoggle{textualoperators}{
		\relalgop{GetEdgesUndirected}
	}{
		\Updownarrow
	}}

\newcommand{\expandbothop}{\iftoggle{textualoperators}{
		\relalgop{ExpandBoth}
	}{
		\updownarrow
	}}

\newcommand{\expandoutop}{\iftoggle{textualoperators}{
		\relalgop{ExpandOut}
	}{
		\uparrow
	}}

\newcommand{\expandinop}{\iftoggle{textualoperators}{
		\relalgop{ExpandIn}
	}{
		\downarrow
	}}

\newcommand{\transitiveclosurebothop}{\iftoggle{textualoperators}{
		\relalgop{TransitiveClosureBoth}
	}{
		\oplus \updownarrow
	}}

\newcommand{\transitiveclosureoutop}{\iftoggle{textualoperators}{
		\relalgop{TransitiveClosureOut}
	}{
		\oplus \updownarrow
	}}

\newcommand{\transitiveclosureinop}{\iftoggle{textualoperators}{
		\relalgop{TransitiveClosureIn}
	}{
		\oplus \updownarrow
	}}

\newcommand{\alldifferentop}{\iftoggle{textualoperators}{
		\relalgop{AllDifferent}
	}{
		\not\equiv
	}}

\newcommand{\duplicateeliminationop}{\iftoggle{textualoperators}{
		\relalgop{DuplicateElimination}
	}{
		\delta
	}}

\newcommand{\sortop}{\iftoggle{textualoperators}{
		\relalgop{Sort}
	}{
		\tau
	}}

\newcommand{\projectionop}{\iftoggle{textualoperators}{
		\relalgop{Projection}
	}{
		\pi
	}}
	
\newcommand{\createop}{\iftoggle{textualoperators}{
	\relalgop{Create}
}{
	\zeta
}}

\newcommand{\selectionop}{\iftoggle{textualoperators}{
		\relalgop{Selection}
	}{
		\sigma
	}}

\newcommand{\renameop}{\iftoggle{textualoperators}{
		\relalgop{Rename}
	}{
		\rho
	}}

\newcommand{\groupingop}{\iftoggle{textualoperators}{
		\relalgop{Grouping}
	}{
		\gamma
	}}

\newcommand{\topop}{\iftoggle{textualoperators}{
		\relalgop{Top}
	}{
		\lambda
	}}

\newcommand{\unwindop}{\iftoggle{textualoperators}{
		\relalgop{Unwind}
	}{
		\omega
	}}

\newcommand{\joinop}{\iftoggle{textualoperators}{
		\relalgop{Join}
	}{
		\bowtie
	}}

\newcommand{\antijoinop}{\iftoggle{textualoperators}{
		\relalgop{AntiJoin}
	}{
		\antijoinsymbol
	}}

\newcommand{\leftouterjoinop}{\iftoggle{textualoperators}{
		\relalgop{LeftOuterJoin}
	}{
		\leftouterjoinsymbol
	}}

\newcommand{\unionop}{\iftoggle{textualoperators}{
		\relalgop{Union}
	}{
		\cup
	}}

\newcommand{\bagunionop}{\iftoggle{textualoperators}{
		\relalgop{BagUnion}
	}{
		\uplus
	}}

\newcommand{\minusop}{\iftoggle{textualoperators}{
		\relalgop{Minus}
	}{
		\setminus
	}}

\newcommand{\intersectionop}{\iftoggle{textualoperators}{
		\relalgop{Intersection}
	}{
		\cap
	}}

\newcommand{\cartesianproductop}{\iftoggle{textualoperators}{
		\relalgop{CartesianProduct}
	}{
		\times
	}}


%%%%%%%%%%%%%%%%%%%%% operator definitions %%%%%%%%%%%%%%%%%%%%%

%%%%%%%%%% nullary operators %%%%%%%%%%

\newcommand{\getvertices}[2]{\getverticesop_{\nodevariable{#1}{#2}}}
\newcommand{\getedgesdirected}[6]{\getedgesopdirected_{\nodevariable{#1}{#2}}^{\nodevariable{#3}{#4}} \left[ \edgevariable{#5}{#6} \right]}
\newcommand{\getedgesundirected}[6]{\getedgesopundirected_{\nodevariable{#1}{#2}}^{\nodevariable{#3}{#4}} \left[ \edgevariable{#5}{#6} \right]}

%%%%%%%%%% unary operators %%%%%%%%%%

% expand operators
\newcommand{\kleenestar}{\ast}
\newcommand{\nagivationbody}[3]{~_{\nodevariable{#1}{}}^{\nodevariable{#2}{#3}}}
\newcommand{\expandedgevariable}[4]{
	\left[
	% #3: minHops, cannot be empty
	% #4: maxHops, if empty, default to infinity
	\edgevariable{#1}{#2}
	\ifstrequal{#3}{1} % minHops = 1
	{
		\ifstrequal{#4}{1}
		{} % minHops = 1 and maxHops = 1 -> write nothing
		{\kleenestar \atom{#3} \ldots \atom{#4}} % minHops = 1 and maxHops != 1
	} % minHops != 1
	{\kleenestar \atom{#3} \ldots \atom{#4}}
	\right]}

\newcommand{\expandboth}[7]{\expandbothop \nagivationbody{#1}{#2}{#3} \expandedgevariable{#4}{#5}{#6}{#7} }
\newcommand{\expandout}[7]{\expandoutop \nagivationbody{#1}{#2}{#3} \expandedgevariable{#4}{#5}{#6}{#7} }
\newcommand{\expandin}[7]{\expandinop \nagivationbody{#1}{#2}{#3} \expandedgevariable{#4}{#5}{#6}{#7} }

% transitive closure operators
\newcommand{\transitiveclosureboth}[7]{\transitiveclosurebothop \nagivationbody{#1}{#2}{#3} \expandedgevariable{#4}{#5}{#6}{#7} }
\newcommand{\transitiveclosureout}[7]{\transitiveclosureoutop \nagivationbody{#1}{#2}{#3} \expandedgevariable{#4}{#5}{#6}{#7} }
\newcommand{\transitiveclosurein}[7]{\transitiveclosureinop \nagivationbody{#1}{#2}{#3} \expandedgevariable{#4}{#5}{#6}{#7} }

% top/skip/limit operators
\newcommand{\topp}[2]{\topop_{#1}^{#2}}
\newcommand{\skipp}[1]{\topop^{#1}}
\newcommand{\limit}[1]{\topop_{#1}}

% see A Formal Presentation of MongoDB (Extended Version)
% by Elena Botoeva, Diego Calvanese, Benjamin Cogrel, Martin Rezk, Guohui Xiao
% https://arxiv.org/abs/1603.09291
\newcommand{\unwind}[1]{\unwindop_\atom{#1}}

% rest of unary operators
\newcommand{\alldifferent}[1]{\alldifferentop_{#1}}
\newcommand{\duplicateelimination}{\duplicateeliminationop}
\newcommand{\sort}[1]{\sortop_{#1}}
\newcommand{\projection}[2]{\projectionop_{#1}^{#2}}
\newcommand{\create}[1]{\createop_{#1}}
\newcommand{\selection}[1]{\selectionop_{#1}}
\newcommand{\rename}[1]{\renameop_{#1}}
\newcommand{\grouping}[1]{\groupingop_{#1}}
	
%%%%%%%%%% binary operators %%%%%%%%%%

\newcommand{\join}{\joinop}
\newcommand{\antijoin}{\antijoinop}
\newcommand{\leftouterjoin}{\leftouterjoinop}
\newcommand{\union}{\unionop}
\newcommand{\bagunion}{\bagunionop}
\newcommand{\minus}{\minusop}
\newcommand{\intersection}{\intersectionop}
\newcommand{\cartesianproduct}{\cartesianproduct}

%%%%%%%%%% ternary operators %%%%%%%%%%
