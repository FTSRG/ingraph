% !TeX program = pdflatex
\documentclass[varwidth=100cm,convert={density=120}]{standalone}
\usepackage[active,tightpage]{preview}

\input{../../../ingraph/visualization/inputs/relalg-packages}
\input{../../../ingraph/visualization/inputs/relalg-commands}

\begin{document}
\begin{preview}
\begin{forest} for tree={align=center}
  [
{$\duplicateelimination$
  \\ \footnotesize
  $\color{gray} \langle \var{route, sensor, swP, sw} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{route, sensor, swP, sw} \rangle$
}
  [
{$\projection{\var{route},~\var{sensor},~\var{swP},~\var{sw}}$
  \\ \footnotesize
  $\color{gray} \langle \var{route, sensor, swP, sw} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{route, sensor, swP, sw} \rangle$
}
  [
{$\antijoin\{\var{route}, \var{sensor}\}$
  \\ \footnotesize
  $\color{gray} \langle \var{route, \_e62, swP, \_e63, sw, \_e64, sensor} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{route, \_e62, swP, \_e63, sw, \_e64, sensor} \rangle$
\\ \footnotesize
$\color{orange}
\langle \var{0, 6} \rangle :
\langle \var{0, 2} \rangle$
}
  [
{$\alldifferent{}$
  \\ \footnotesize
  $\color{gray} \langle \var{route, \_e62, swP, \_e63, sw, \_e64, sensor} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{route, \_e62, swP, \_e63, sw, \_e64, sensor} \rangle$
}
  [
{$\join\{\var{sw}\}$
  \\ \footnotesize
  $\color{gray} \langle \var{route, \_e62, swP, \_e63, sw, \_e64, sensor} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{route, \_e62, swP, \_e63, sw, \_e64, sensor} \rangle$
\\ \footnotesize
$\color{orange}
\langle \var{4} \rangle :
\langle \var{0} \rangle$
}
  [
{$\join\{\var{swP}\}$
  \\ \footnotesize
  $\color{gray} \langle \var{route, \_e62, swP, \_e63, sw} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{route, \_e62, swP, \_e63, sw} \rangle$
\\ \footnotesize
$\color{orange}
\langle \var{2} \rangle :
\langle \var{0} \rangle$
}
  [
{$\getedgesi{route}{Route}{swP}{SwitchPosition}$\\$\getedgesii{\_e62}{follows}$
  \\ \footnotesize
  $\color{gray} \langle \var{route, \_e62, swP} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{route, \_e62, swP} \rangle$
}     ,tier=input,for tree={blue,densely dashed}
]
  [
{$\getedgesi{swP}{SwitchPosition}{sw}{Switch}$\\$\getedgesii{\_e63}{target}$
  \\ \footnotesize
  $\color{gray} \langle \var{swP, \_e63, sw} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{swP, \_e63, sw} \rangle$
}     ,tier=input,for tree={blue,densely dashed}
]
]
  [
{$\getedgesi{sw}{Switch}{sensor}{Sensor}$\\$\getedgesii{\_e64}{monitoredBy}$
  \\ \footnotesize
  $\color{gray} \langle \var{sw, \_e64, sensor} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{sw, \_e64, sensor} \rangle$
}     ,tier=input,for tree={blue,densely dashed}
]
]
]
  [
{$\getedgesi{route}{Route}{sensor}{Sensor}$\\$\getedgesii{g}{gathers}$
  \\ \footnotesize
  $\color{gray} \langle \var{route, g, sensor} \rangle$
\\ \footnotesize
$\color{orange} \langle \var{route, g, sensor} \rangle$
}     ,tier=input,for tree={blue,densely dashed}
]
]
]
]
;
\end{forest}
\end{preview}
\end{document}
