\begin{forest} for tree={align=center}
[
	{$\projection{\var{a},~\var{b},~\var{c}}$
			\\
			\footnotesize
			$\color{gray} \langle \var{a, b, c} \rangle$
			}
[
	{$\join$
			\\
			\footnotesize
			$\color{gray} \langle \var{a, r, b, r2, c} \rangle$
			}
[
	{$\alldifferent{}$
			\\
			\footnotesize
			$\color{gray} \langle \var{a, r, b} \rangle$
			}
[
	{$\expandboth{a}{b}{}{r}{}{1}{1}$
			\\
			\footnotesize
			$\color{gray} \langle \var{a, r, b} \rangle$
			}
[
	{$\getvertices{a}{}$
			\\
			\footnotesize
			$\color{gray} \langle \var{a} \rangle$
			},tier=input,for tree={blue,densely dashed}
]
]
]
[
	{$\selection{\var{r} \neq \var{r2}}$
			\\
			\footnotesize
			$\color{gray} \langle \var{b, r2, c} \rangle$
			}
[
	{$\alldifferent{}$
			\\
			\footnotesize
			$\color{gray} \langle \var{b, r2, c} \rangle$
			}
[
	{$\expandboth{b}{c}{}{r2}{}{1}{1}$
			\\
			\footnotesize
			$\color{gray} \langle \var{b, r2, c} \rangle$
			}
[
	{$\getvertices{b}{}$
			\\
			\footnotesize
			$\color{gray} \langle \var{b} \rangle$
			},tier=input,for tree={blue,densely dashed}
]
]
]
]
]
]
;
\end{forest}
